[Unit]
Description=Prometheus server

[Service]
User=prometheus
ExecStart=/usr/bin/prometheus \
              --config.file=/etc/prometheus/prometheus.yml \
              --storage.tsdb.retention.time=1000d \
              --storage.tsdb.retention.size=50GB \
              --storage.tsdb.max-block-duration=24h \
              --storage.tsdb.min-block-duration=2h \
              --query.max-samples=5000000 \
              --query.max-concurrency=10 \
              --storage.tsdb.wal-compression
Restart=on-failure
RestartSec=2s
TimeoutStopSec=10m
LimitNOFILE=32768
SyslogIdentifier=prometheus
ExecReload=/bin/kill -HUP $MAINPID

[Install]
WantedBy=multi-user.target
