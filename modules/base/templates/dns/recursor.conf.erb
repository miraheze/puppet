# Basic config for setup
allow-from = 127.0.0.0/8, ::1/128
config-dir = /etc/powerdns
dnssec = off
local-address = <%= @local_address %>
quiet = yes
setgid = pdns
setuid = pdns

daemon=yes
threads=<%= @threads %>
pdns-distributes-queries=no
reuseport=yes
max-mthreads=512

max-negative-ttl=3600
max-cache-entries=3000000

max-tcp-clients=128

max-tcp-per-client=100

stats-ringbuffer-entries=1000

query-local-address= <%= @query_local_address.join(', ') %>

# This prevents pdns from polling a public server to check for sec fixes
security-poll-suffix=

# Root hints distributed by Debian w/ 4.x
hint-file=/usr/share/dns/root.hints

# Forward requests to our authorative servers
forward-zones = <%= @forward_zones %>

# Default in 5.0 (trixie) and off in 4.x (bookworm)
extended-resolution-errors=yes
